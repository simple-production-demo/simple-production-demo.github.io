<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
<dom-module id="ipad-banner">
  <template>
    <iron-ajax
            auto
            url="//dev-blog-bbyca.ca.bestbuy.com/wp-json/wp/v2/banners/{{entryId}}"
            handle-as="json"
            last-response="{{data}}"
            on-error="_setFallback"></iron-ajax>


    <style>
      :host {
        max-width: 600px;
        display: block;
        border: 1px solid #ccc;
        padding: 10px;
        font-size: 15px;
        text-align: left;
      }
      .banner {
        align-content: flex-start;
        align-items: center;
        display: flex;
        font-family: 'Roboto', sans-serif;
        flex-flow: row wrap;
        justify-content: space-around;
        width: 100%;

      }

      .carriers {
        margin-bottom: 10px;
        clear: both;
        overflow: hidden;
      }

      .carriers img {
        float: left;
        height: 12px;
      }

      img.main {
        width: 100%;
        max-width: 300px;
      }

      h3 {
        font-size: 2em;
        font-weight: 300;
        line-height: 1em;
        margin: 0 0 10px;
        color: #4d4d4f;
      }

      p {
        font-size: .8em;
        font-weight: 300;
        line-height: 1.5em;
        margin: 0 0 1em;
      }

      strong {
        color: #da1a36;
        font-weight: bold;
      }

      a.call-to-action {
        font-size: 1em;
        color: #007fd8;
        margin: 0;
        line-height: 1.5em;
        text-decoration: none;
      }

      @media screen and (max-width: 39.9375em) {
        .image-column,
        .promo-column {
          /*background: blue;*/
          box-sizing: border-box;
          width: 100%;
          text-align: center;
          padding: 0 2em;
        }
      }

      @media screen and (min-width: 40em) {
        .image-column {
          /*background-color: #fff200;*/
          box-sizing: border-box;
          flex: 0 0 41.66%;
          line-height: 0;
          padding: 0 0.5em;
        }

        .promo-column {
          box-sizing: border-box;
          flex: 0 0 58.33%;
          line-height: 0;
          padding: 0 0.5em;
        }
      }
    </style>

    <div class="banner">
      <div class="image-column">
        <img class="main"
             src="http://multimedia.bbycastatic.ca/multimedia/products/1500x1500/104/10486/10486204_2.jpg">
      </div>
      <div class="promo-column">
        <h3>[[data.title.rendered]]</h3>
        <p>
          [[data.excerpt.rendered]]
          </p>
        <div class="carriers">
          <img src="http://images.bbycastatic.ca/sf/projects/_content/_weekly/home/applebanner/assets/carriers/fido-logo-m.png" alt="fido">
        </div>
        <a class="call-to-action" href="#">Shop Now &gt;</a>
      </div>
    </div>
  </template>

  <script>

    class SimplePromotional extends Polymer.Element {
      static get is() {
        return 'ipad-banner';
      }

      static get properties() {
        return {
          entryId: {
            type: String
          }
        };
      }

      static get observers() {
        return [
          "dataChanged(data)"
        ];
      }

      _setFallback() {
       this.data = {
         title: {
           rendered: "iPhone Banner"
         },
         excerpt: {
           rendered: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. In sed pharetra mauris. Proin faucibus tellus id dui bibendum, at suscipit arcu faucibus. Sed vitae pharetra arcu. Mauris turpis eros, porta eget dolor in, auctor euismod felis. Vestibulum semper, magna a vulputate vulputate, est justo elementum enim, ut lobortis lectus odio id quam."
         }
       }
      }

      dataChanged(data) {
        console.log(data);
      }
    }

    window.customElements.define(SimplePromotional.is, SimplePromotional);
  </script>
</dom-module>